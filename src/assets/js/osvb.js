/** ACCESSIBLE TOGGLE FUNCTION
 * @nrk/core-toggle v2.2.3 - Copyright (c) 2017-2019 NRK
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).coreToggle=t()}(this,function(){"use strict";var e="undefined"!=typeof window,t=e&&/(android)/i.test(navigator.userAgent),n=e&&/iPad|iPhone|iPod/.test(String(navigator.platform)),o=function(e){void 0===e&&(e=!1);try{window.addEventListener("test",null,{get passive(){e=!0}})}catch(e){}return e}();function r(e,t,n,r){(void 0===r&&(r=!1),"undefined"==typeof window||window[e=e+"-"+t])||(o||"object"!=typeof r||(r=Boolean(r.capture)),("resize"===t||"load"===t?window:document).addEventListener(window[e]=t,n,r))}var a="prevent_recursive_dispatch_maximum_callstack";function u(e,t,n){void 0===n&&(n={});var r,o=""+a+t;if(e[o])return!0;e[o]=!0,"function"==typeof window.CustomEvent?r=new window.CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n);var i=e.dispatchEvent(r);return e[o]=null,i}function d(e){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function l(e,t){if(void 0===t&&(t=document),e){if(e.nodeType)return[e];if("string"==typeof e)return[].slice.call(t.querySelectorAll(e));if(e.length)return[].slice.call(e)}return[]}var c="data-@nrk/core-toggle-2.2.3".replace(/\W+/g,"-"),f=t?"data":"aria",i=27;function s(e){return document.getElementById(e.getAttribute("aria-controls"))||e.nextElementSibling}function p(e,t){var n=s(e),r="true"===e.getAttribute("aria-expanded"),o="boolean"==typeof t?t:"toggle"===t?!r:r,i=r===o||u(e,"toggle",{relatedTarget:n,isOpen:r,willOpen:o})?o:"true"===e.getAttribute("aria-expanded"),a=!r&&i&&n.querySelector("[autofocus]");a&&setTimeout(function(){return a&&a.focus()}),e.setAttribute("aria-expanded",i),n[i?"removeAttribute":"setAttribute"]("hidden","")}return r(c,"keydown",function(e){if(e.keyCode===i)for(var t=e.target;t;t=t.parentElement){var n=t.id&&document.querySelector('[aria-controls="'+t.id+'"]')||t;if("false"!==n.getAttribute(c)&&"true"===n.getAttribute("aria-expanded"))return e.preventDefault(),n.focus(),p(n,!1)}},!0),r(c,"click",function(e){var o=e.target;if(e.defaultPrevented)return!1;for(var t=o,n=void 0;t;t=t.parentElement){var r=n&&t.id&&document.querySelector("["+c+'][aria-controls="'+t.id+'"]');if("BUTTON"!==t.nodeName&&"A"!==t.nodeName||t.hasAttribute(c)||(n=t),r){u(r,"toggle.select",{relatedTarget:s(r),currentTarget:n,value:n.textContent.trim()});break}}l("["+c+"]").forEach(function(e){var t="true"===e.getAttribute("aria-expanded"),n="false"!==e.getAttribute(c),r=s(e);e.contains(o)?p(e,!t):n&&t&&p(e,r.contains(o))})}),function(e,t){var i="object"==typeof t?t:{open:t};return n&&(document.documentElement.style.cursor="pointer"),l(e).map(function(e){var t=s(e),n="true"===e.getAttribute("aria-expanded"),r="boolean"==typeof i.open?i.open:"toggle"===i.open?!n:n,o=String((i.hasOwnProperty("popup")?i.popup:e.getAttribute(c))||!1);return i.value&&(e.innerHTML=i.value),"false"!==o&&"true"!==o&&e.setAttribute("aria-label",e.textContent+", "+o),e.setAttribute(c,o),e.setAttribute("aria-controls",t.id=t.id||d()),t.setAttribute(f+"-labelledby",e.id=e.id||d()),p(e,r),e})}});

coreToggle('.nav__toggle, .expander__toggle');

